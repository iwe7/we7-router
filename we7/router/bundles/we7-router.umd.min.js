!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/observable/fromPromise"),require("rxjs/observable/of"),require("rxjs/operator/concatAll"),require("rxjs/operator/every"),require("rxjs/operator/last"),require("rxjs/operator/map"),require("rxjs/operator/mergeAll"),require("@angular/router")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/observable/fromPromise","rxjs/observable/of","rxjs/operator/concatAll","rxjs/operator/every","rxjs/operator/last","rxjs/operator/map","rxjs/operator/mergeAll","@angular/router"],e):e(r["we7-router"]={},r.ng.core,r.Rx.Observable,r.Rx.Observable,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.ng.router)}(this,function(r,e,t,n,a,i,o,s,p,u){"use strict";var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};function h(r,e){function t(){this.constructor=r}c(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function m(r,e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)}function l(r){var e=g("i"),t=g("m"),n="app/index.php?i="+(e||"2")+"&c=entry&m="+(t||"imeepos_runner");0<r.segments.length&&(console.log(r.segments),n+="&do="+r.segments[r.segments.length-1].path);return n}function f(r){var e=g("m"),t=g("i"),n="web/index.php?c=site&a=entry&i="+(t||"2")+"&m="+(e||"imeepos_runner");0<r.segments.length&&(console.log(r.segments),n+="&do="+r.segments[r.segments.length-1].path);return n}function g(r){var i;return(i={},location.search.replace(/^\?/,"").split("&").filter(function(r,e){if(""!==r&&r.indexOf("="))return!0}).forEach(function(r,e){var t=r.indexOf("="),n=r.substring(0,t),a=r.substring(t+1);i[n]=a}),i)[r]}function y(r){return(e=r,encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")).replace(/%3B/gi,";");var e}function v(r){return decodeURIComponent(r)}function P(r){return v(r.replace(/\+/g,"%20"))}var O=/^[^\/()?;=&#]+/;function b(r){var e=r.match(O);return e?e[0]:""}var d=/^[^=?&#]+/;var x=/^[^?&#]+/;function R(t,r,n){if(!t.hasChildren())return n(t);if(r){var e=t.children[u.PRIMARY_OUTLET]?R(t.children[u.PRIMARY_OUTLET],!1,n):"",a=[];return m(t.children,function(r,e){e!==u.PRIMARY_OUTLET&&a.push(e+":"+R(r,!1,n))}),0<a.length?e+"("+a.join("//")+")":e}var i,o,s,p=(o=function(r,e){return e===u.PRIMARY_OUTLET?[R(t.children[u.PRIMARY_OUTLET],!1,n)]:[e+":"+R(r,!1,n)]},s=[],m((i=t).children,function(r,e){e===u.PRIMARY_OUTLET&&(s=s.concat(o(r,e)))}),m(i.children,function(r,e){e!==u.PRIMARY_OUTLET&&(s=s.concat(o(r,e)))}),s);return n(t)+"/("+p.join("//")+")"}function _(t){var r=Object.keys(t).map(function(e){var r=t[e];return Array.isArray(r)?r.map(function(r){return y(e)+"="+y(r)}).join("&"):y(e)+"="+y(r)});return r.length?"&"+r.join("&"):""}var j=function(){function r(r){this.url=r,this.num=0,this.remaining=r}return r.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new u.UrlSegmentGroup([],{}):new u.UrlSegmentGroup([],this.parseChildren())},r.prototype.parseQueryParams=function(){var r={};if(this.consumeOptional("?"))for(;this.parseQueryParam(r),this.consumeOptional("&"););return r},r.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},r.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var t={};this.peekStartsWith("(")&&(t=this.parseParens(!1));var n=this.parseQueryParams();return n["do"]&&r.push(new u.UrlSegment(n["do"],{})),1<r.length&&(r=[r[r.length-1]]),(0<r.length||0<Object.keys(e).length)&&(t[u.PRIMARY_OUTLET]=new u.UrlSegmentGroup(r,e)),t},r.prototype.parseSegment=function(){var r=b(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(r),new u.UrlSegment(v(r),this.parseMatrixParams())},r.prototype.parseMatrixParams=function(){for(var r={};this.consumeOptional(";");)this.parseParam(r);return r},r.prototype.parseParam=function(r){var e=b(this.remaining);if(e){this.capture(e);var t="";if(this.consumeOptional("=")){var n=b(this.remaining);n&&(t=n,this.capture(t))}r[v(e)]=v(t)}},r.prototype.parseQueryParam=function(r){var e,t,n=(e=this.remaining,(t=e.match(d))?t[0]:"");if(n){this.capture(n);var a,i,o="";if(this.consumeOptional("=")){var s=(a=this.remaining,(i=a.match(x))?i[0]:"");s&&(o=s,this.capture(o))}var p=P(n),u=P(o);if(r.hasOwnProperty(p)){var c=r[p];Array.isArray(c)||(c=[c],r[p]=c),c.push(u)}else r[p]=u}},r.prototype.parseParens=function(r){var e={};for(this.capture("(");!this.consumeOptional(")")&&0<this.remaining.length;){var t=b(this.remaining),n=this.remaining[t.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error("Cannot parse url '"+this.url+"'");var a=undefined;-1<t.indexOf(":")?(a=t.substr(0,t.indexOf(":")),this.capture(a),this.capture(":")):r&&(a=u.PRIMARY_OUTLET);var i=this.parseChildren();e[a]=1===Object.keys(i).length?i[u.PRIMARY_OUTLET]:new u.UrlSegmentGroup([],i),this.consumeOptional("//")}return e},r.prototype.peekStartsWith=function(r){return this.remaining.startsWith(r)},r.prototype.consumeOptional=function(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)},r.prototype.capture=function(r){if(!this.consumeOptional(r))throw new Error('Expected "'+r+'".')},r}(),S=function(){function r(){}return r.prototype.parse=function(r){var e=new j(r);return new M(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},r.prototype.serialize=function(r){return""+("/"+R(r.root,!0,l))+_(r.queryParams)+("string"==typeof r.fragment?"#"+y(r.fragment):"")},r}(),w=new S,M=function(a){function r(r,e,t){var n=a.call(this)||this;return n.root=r,n.queryParams=e,n.fragment=t,n}return h(r,a),Object.defineProperty(r.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=u.convertToParamMap(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),r.prototype.toString=function(){return w.serialize(this)},r}(u.UrlTree),T=function(){function r(){}return r.prototype.parse=function(r){var e=new j(r);return new U(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},r.prototype.serialize=function(r){return""+("/"+R(r.root,!0,f))+_(r.queryParams)+("string"==typeof r.fragment?"#"+y(r.fragment):"")},r}(),q=new T,U=function(a){function r(r,e,t){var n=a.call(this)||this;return n.root=r,n.queryParams=e,n.fragment=t,n}return h(r,a),Object.defineProperty(r.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=u.convertToParamMap(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),r.prototype.toString=function(){return q.serialize(this)},r}(u.UrlTree);r.MobileUrlSerializer=S,r.WebUrlSerializer=T,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=we7-router.umd.min.js.map
