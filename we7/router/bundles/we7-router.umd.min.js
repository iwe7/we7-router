!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/observable/fromPromise"),require("rxjs/observable/of"),require("rxjs/operator/concatAll"),require("rxjs/operator/every"),require("rxjs/operator/last"),require("rxjs/operator/map"),require("rxjs/operator/mergeAll"),require("@angular/router")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/observable/fromPromise","rxjs/observable/of","rxjs/operator/concatAll","rxjs/operator/every","rxjs/operator/last","rxjs/operator/map","rxjs/operator/mergeAll","@angular/router"],e):e(r["we7-router"]={},r.ng.core,r.Rx.Observable,r.Rx.Observable,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.Rx.Observable.prototype,r.ng.router)}(this,function(r,e,t,n,o,i,a,s,u,p){"use strict";var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};function h(r,e){function t(){this.constructor=r}c(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}function l(r,e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)}function f(r){var e=g("i"),t=g("m"),n="app/index.php?i="+(e||"2")+"&c=entry&m="+(t||"imeepos_runner");0<r.segments.length&&(console.log(r.segments),n+="&do="+r.segments[r.segments.length-1].path);return n}function m(r){var e=g("m"),t=g("i"),n="web/index.php?c=site&a=entry&i="+(t||"2")+"&m="+(e||"imeepos_runner");0<r.segments.length&&(console.log(r.segments),n+="&do="+r.segments[r.segments.length-1].path);return n}function g(r){var i;return(i={},location.search.replace(/^\?/,"").split("&").filter(function(r,e){if(""!==r&&r.indexOf("="))return!0}).forEach(function(r,e){var t=r.indexOf("="),n=r.substring(0,t),o=r.substring(t+1);i[n]=o}),i)[r]}function y(r){return(e=r,encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")).replace(/%3B/gi,";");var e}function v(r){return decodeURIComponent(r)}function d(r){return v(r.replace(/\+/g,"%20"))}var P=/^[^\/()?;=&#]+/;function O(r){var e=r.match(P);return e?e[0]:""}var b=/^[^=?&#]+/;var R=/^[^?&#]+/;function x(t,r,n){if(!t.hasChildren())return n(t);if(r){var e=t.children[p.PRIMARY_OUTLET]?x(t.children[p.PRIMARY_OUTLET],!1,n):"",o=[];return l(t.children,function(r,e){e!==p.PRIMARY_OUTLET&&o.push(e+":"+x(r,!1,n))}),0<o.length?e+"("+o.join("//")+")":e}var i,a,s,u=(a=function(r,e){return e===p.PRIMARY_OUTLET?[x(t.children[p.PRIMARY_OUTLET],!1,n)]:[e+":"+x(r,!1,n)]},s=[],l((i=t).children,function(r,e){e===p.PRIMARY_OUTLET&&(s=s.concat(a(r,e)))}),l(i.children,function(r,e){e!==p.PRIMARY_OUTLET&&(s=s.concat(a(r,e)))}),s);return n(t)+"/("+u.join("//")+")"}function M(t){var r=Object.keys(t).map(function(e){var r=t[e];return Array.isArray(r)?r.map(function(r){return y(e)+"="+y(r)}).join("&"):y(e)+"="+y(r)});return r.length?"&"+r.join("&"):""}var S=function(){function r(r){this.url=r,this.num=0,this.remaining=r}return r.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new p.UrlSegmentGroup([],{}):new p.UrlSegmentGroup([],this.parseChildren())},r.prototype.parseQueryParams=function(){var r={};if(this.consumeOptional("?"))for(;this.parseQueryParam(r),this.consumeOptional("&"););return r},r.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},r.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var t={};this.peekStartsWith("(")&&(t=this.parseParens(!1));var n=this.parseQueryParams();return n["do"]&&r.push(new p.UrlSegment(n["do"],{})),1<r.length&&(r=[r[r.length-1]]),(0<r.length||0<Object.keys(e).length)&&(t[p.PRIMARY_OUTLET]=new p.UrlSegmentGroup(r,e)),t},r.prototype.parseSegment=function(){var r=O(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(r),new p.UrlSegment(v(r),this.parseMatrixParams())},r.prototype.parseMatrixParams=function(){for(var r={};this.consumeOptional(";");)this.parseParam(r);return r},r.prototype.parseParam=function(r){var e=O(this.remaining);if(e){this.capture(e);var t="";if(this.consumeOptional("=")){var n=O(this.remaining);n&&(t=n,this.capture(t))}r[v(e)]=v(t)}},r.prototype.parseQueryParam=function(r){var e,t,n=(e=this.remaining,(t=e.match(b))?t[0]:"");if(n){this.capture(n);var o,i,a="";if(this.consumeOptional("=")){var s=(o=this.remaining,(i=o.match(R))?i[0]:"");s&&(a=s,this.capture(a))}var u=d(n),p=d(a);if(r.hasOwnProperty(u)){var c=r[u];Array.isArray(c)||(c=[c],r[u]=c),c.push(p)}else r[u]=p}},r.prototype.parseParens=function(r){var e={};for(this.capture("(");!this.consumeOptional(")")&&0<this.remaining.length;){var t=O(this.remaining),n=this.remaining[t.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error("Cannot parse url '"+this.url+"'");var o=undefined;-1<t.indexOf(":")?(o=t.substr(0,t.indexOf(":")),this.capture(o),this.capture(":")):r&&(o=p.PRIMARY_OUTLET);var i=this.parseChildren();e[o]=1===Object.keys(i).length?i[p.PRIMARY_OUTLET]:new p.UrlSegmentGroup([],i),this.consumeOptional("//")}return e},r.prototype.peekStartsWith=function(r){return this.remaining.startsWith(r)},r.prototype.consumeOptional=function(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)},r.prototype.capture=function(r){if(!this.consumeOptional(r))throw new Error('Expected "'+r+'".')},r}(),_=function(){function r(){}return r.prototype.parse=function(r){var e=new S(r);return new U(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},r.prototype.serialize=function(r){return""+("/"+x(r.root,!0,f))+M(r.queryParams)+("string"==typeof r.fragment?"#"+y(r.fragment):"")},r}(),j=new _,U=function(o){function r(r,e,t){var n=o.call(this)||this;return n.root=r,n.queryParams=e,n.fragment=t,n}return h(r,o),Object.defineProperty(r.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=p.convertToParamMap(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),r.prototype.toString=function(){return j.serialize(this)},r}(p.UrlTree),w=function(){function r(){}return r.prototype.parse=function(r){var e=new S(r);return new q(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},r.prototype.serialize=function(r){return""+("/"+x(r.root,!0,m))+M(r.queryParams)+("string"==typeof r.fragment?"#"+y(r.fragment):"")},r}(),T=new w,q=function(o){function r(r,e,t){var n=o.call(this)||this;return n.root=r,n.queryParams=e,n.fragment=t,n}return h(r,o),Object.defineProperty(r.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=p.convertToParamMap(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),r.prototype.toString=function(){return T.serialize(this)},r}(p.UrlTree),A=function(){function r(){}return r.forRoot=function(){return{ngModule:r,providers:[{provide:p.UrlSerializer,useClass:_}]}},r}();A.decorators=[{type:e.NgModule,args:[{}]}],A.ctorParameters=function(){return[]};var E=function(){function r(){}return r.forRoot=function(){return{ngModule:r,providers:[{provide:p.UrlSerializer,useClass:w}]}},r}();E.decorators=[{type:e.NgModule,args:[{}]}],E.ctorParameters=function(){return[]},r.MobileUrlSerializer=_,r.WebUrlSerializer=w,r.We7MobileRouterModule=A,r.We7WebRouterModule=E,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=we7-router.umd.min.js.map
